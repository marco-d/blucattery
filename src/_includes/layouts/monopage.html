{% extends "layouts/base.html" %}

{% block maintitle %}
{{ title }}
{% endblock %}

{% block payoff %}
{{ payoff }}
{% endblock %}

{% block contentstack %}
{% for item in collections.bricks %}
<section class="container-fluid bg-light p-2" >
    <div class="row">
        <div class="col-sm-{{ item.data.layoutcols.text }} newsreader-heading">
            <h2 id="{{ item.data.shortname }}">{{ item.data.title }}</h2>
            <p><strong><em> {{ item.data.summary }}</em></strong></p>
            <p> {{ item.content | safe }}</p>
            
        </div>
        <div class="col-sm-{{ item.data.layoutcols.img }}">
            <figure>
                <img src={{ item.data.img.src }} class="img-fluid" alt="">
                <figcaption>{{ item.data.img.desc }}</figcaption>
            </figure>
            {{ item.data.embedcode | safe }}
            
        </div>
        <p><a href="#" class="backbutton"> ▲ top </a></p>
    </div>
    <hr>
</section>
{% endfor %}
{% endblock %}

{% block map %}
<section class="container-fluid bg-catterycolor p-2" id="where">
    <div class="row">
        <div class="col-sm-4">
            <h3>Wo kannst du uns finden?</h3>
            von Blumenberg <br>
            Britisch Kurzhaar Familienzucht <br>
            in Bern-Breitenrain
        </div>
        <div class="col-sm-8">
            <iframe
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d7544.614485104128!2d7.446861104869439!3d46.956656380939855!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x478e39e92325d549%3A0x14d9e17a554eda3d!2sSpitalacker%2C%20Berna!5e0!3m2!1sit!2sch!4v1742733915468!5m2!1sit!2sch"
                width="100%" height="360" style="border:0;" allowfullscreen="" loading="lazy"
                referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>
    </div>
</section>
{% endblock %}

{% block contactform %}
<section class="container-fluid bg-catterycolor p-2" id="kontakt">
    <div class="row">
        <div class="col-sm-4">
            <h3>Kontaktformular</h3>
            <p>Wir freuen uns über Ihre Nachricht!</p>
        </div>
        <div class="col-sm-8">
            <form id="contact-form" class="p-4 rounded shadow-sm">
                <div class="mb-3">
                  <label for="name" class="form-label">Name</label>
                  <input type="text" class="form-control" id="name" name="name" required>
                </div>
              
                <div class="mb-3">
                  <label for="email" class="form-label">E-Mail</label>
                  <input type="email" class="form-control" id="email" name="email" required>
                </div>
              
                <div class="mb-3">
                  <label for="tel" class="form-label">Telefon</label>
                  <input type="text" class="form-control" id="tel" name="tel" required>
                </div>
              
                <div class="mb-3">
                  <label for="message" class="form-label">Nachricht</label>
                  <textarea class="form-control" id="message" name="message" rows="5" required></textarea>
                </div>
              
                <button type="submit" class="btn btn-primary">Nachricht senden</button>
                <div id="status" class="form-text mt-2 text-success"></div>
              </form>
              
              <script>
                const form = document.getElementById('contact-form');
                form.addEventListener('submit', async function (e) {
                  e.preventDefault();
              
                  const data = {
                    name: form.name.value,
                    email: form.email.value,
                    tel: form.tel.value,
                    message: form.message.value
                  };
              
                  try {
                    await fetch('https://script.google.com/macros/s/AKfycbxD4eek7ngatGqiSb4dNK2i_t1HfaBgICrTMneGbmrBrW3CzFLGQuQvjWiu6k_1x7HBtw/exec', {
                      method: 'POST',
                      mode: 'no-cors',
                      headers: { 'Content-Type': 'application/json' },
                      body: JSON.stringify(data)
                    });
              
                    document.getElementById('status').textContent = "Nachricht erfolgreich gesendet!";
                    form.reset();
                  } catch (error) {
                    document.getElementById('status').textContent = "Fehler beim Senden. Bitte später versuchen.";
                  }
                });
              </script>
        </div>
    </div>
</section>
{% endblock %}

{% block footerinfo %}
{{ footinfo }}
{% endblock %}